<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Probability Theory - Discrete Math</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/content.css">
</head>
<body>
    <div class="nav-bar">
        <button class="back-btn" onclick="window.location.href='../index.html'">‚Üê Back to Index</button>
        <div class="progress-indicator">
            <span id="progress-text">Progress: 0%</span>
        </div>
    </div>

    <div class="content-container">
        <header class="content-header">
            <h1 class="fade-in">üé≤ Probability Theory</h1>
            <p class="subtitle">Measuring Uncertainty with Mathematical Precision</p>
        </header>

        <!-- Section 1: Probability Basics -->
        <section class="content-section" data-section="1">
            <h2>1. Probability Basics</h2>

            <div class="concept-box">
                <h3>Sample Space & Events</h3>
                <p>The <strong>sample space (S)</strong> is the set of all possible outcomes of an experiment.</p>
                <p>An <strong>event (E)</strong> is a subset of the sample space.</p>

                <div class="example-box">
                    <h4>Example: Rolling a Die</h4>
                    <ul>
                        <li><strong>Sample Space:</strong> S = {1, 2, 3, 4, 5, 6}</li>
                        <li><strong>Event "even number":</strong> E = {2, 4, 6}</li>
                        <li><strong>Event "number > 4":</strong> E = {5, 6}</li>
                    </ul>
                </div>

                <h3>Axioms of Probability</h3>
                <div class="theorem-box">
                    <p><strong>Axiom 1:</strong> 0 ‚â§ P(E) ‚â§ 1 for any event E</p>
                    <p><strong>Axiom 2:</strong> P(S) = 1 (certainty)</p>
                    <p><strong>Axiom 3:</strong> For mutually exclusive events A and B:<br>
                    P(A ‚à™ B) = P(A) + P(B)</p>
                </div>
            </div>

            <div class="code-example">
                <h3>üíª Programming Connection</h3>
                <pre><code class="language-python">import random

# Sample space for rolling a die
sample_space = [1, 2, 3, 4, 5, 6]

# Event: rolling an even number
event_even = [x for x in sample_space if x % 2 == 0]
print(f"Even numbers: {event_even}")  # [2, 4, 6]

# Simulate rolling a die 1000 times
rolls = [random.choice(sample_space) for _ in range(1000)]
even_count = sum(1 for roll in rolls if roll in event_even)
print(f"Probability of even: {even_count/1000:.3f}")  # ‚âà 0.500</code></pre>
            </div>
        </section>

        <!-- Section 2: Probability of Events -->
        <section class="content-section" data-section="2">
            <h2>2. Probability of Events</h2>

            <div class="concept-box">
                <h3>Finite Uniform Probability Spaces</h3>
                <p>When all outcomes are equally likely:</p>
                <div class="formula-box">
                    <p><strong>P(E) = |E| / |S|</strong></p>
                    <p>Number of favorable outcomes / Total number of outcomes</p>
                </div>

                <div class="example-box">
                    <h4>Example: Drawing a Card</h4>
                    <ul>
                        <li>Sample space: 52 cards</li>
                        <li>Event "drawing a heart": |E| = 13</li>
                        <li>P(heart) = 13/52 = 1/4 = 0.25</li>
                    </ul>

                    <h4>Example: Two Dice</h4>
                    <ul>
                        <li>Sample space: 6 √ó 6 = 36 outcomes</li>
                        <li>Event "sum = 7": {(1,6), (2,5), (3,4), (4,3), (5,2), (6,1)}</li>
                        <li>P(sum = 7) = 6/36 = 1/6 ‚âà 0.167</li>
                    </ul>
                </div>
            </div>

            <div class="code-example">
                <h3>üíª Calculating Probabilities</h3>
                <pre><code class="language-python">from itertools import product

# Two dice sample space
two_dice = list(product(range(1, 7), repeat=2))
print(f"Total outcomes: {len(two_dice)}")  # 36

# Event: sum equals 7
sum_seven = [(d1, d2) for d1, d2 in two_dice if d1 + d2 == 7]
prob_seven = len(sum_seven) / len(two_dice)
print(f"P(sum=7) = {prob_seven:.4f}")  # 0.1667

# Event: doubles (same number on both dice)
doubles = [(d1, d2) for d1, d2 in two_dice if d1 == d2]
prob_doubles = len(doubles) / len(two_dice)
print(f"P(doubles) = {prob_doubles:.4f}")  # 0.1667</code></pre>
            </div>
        </section>

        <!-- Section 3: Complement Rule -->
        <section class="content-section" data-section="3">
            <h2>3. Complement Rule</h2>

            <div class="concept-box">
                <h3>Computing "Not E"</h3>
                <div class="formula-box">
                    <p><strong>P(E') = 1 - P(E)</strong></p>
                    <p>where E' is the complement of E (everything NOT in E)</p>
                </div>

                <div class="example-box">
                    <h4>Example: At Least One</h4>
                    <p>What's the probability of getting at least one head in 3 coin flips?</p>
                    <ul>
                        <li>Direct: Count HHH, HHT, HTH, HTT, THH, THT, TTH = 7 outcomes</li>
                        <li>P(at least one H) = 7/8</li>
                        <li><strong>Easier with complement:</strong></li>
                        <li>P(at least one H) = 1 - P(no heads)</li>
                        <li>= 1 - P(TTT) = 1 - 1/8 = 7/8</li>
                    </ul>
                </div>
            </div>

            <div class="code-example">
                <h3>üíª Complement in Code</h3>
                <pre><code class="language-python">import random

def simulate_coin_flips(n_flips, trials=10000):
    """Simulate n coin flips, count trials with at least one head"""
    at_least_one_head = 0

    for _ in range(trials):
        flips = [random.choice(['H', 'T']) for _ in range(n_flips)]
        if 'H' in flips:
            at_least_one_head += 1

    return at_least_one_head / trials

# Theoretical: P(at least 1 H in 3 flips) = 1 - (1/2)^3 = 7/8
theoretical = 1 - (1/2)**3
simulated = simulate_coin_flips(3)
print(f"Theoretical: {theoretical:.4f}")
print(f"Simulated: {simulated:.4f}")</code></pre>
            </div>
        </section>

        <!-- Section 4: Addition Rule -->
        <section class="content-section" data-section="4">
            <h2>4. Addition Rule</h2>

            <div class="concept-box">
                <h3>Probability of Union</h3>
                <div class="formula-box">
                    <p><strong>P(A ‚à™ B) = P(A) + P(B) - P(A ‚à© B)</strong></p>
                    <p>Subtract intersection to avoid double-counting</p>
                </div>

                <div class="example-box">
                    <h4>Example: Card Drawing</h4>
                    <p>What's the probability of drawing a heart OR a face card?</p>
                    <ul>
                        <li>P(heart) = 13/52</li>
                        <li>P(face card) = 12/52</li>
                        <li>P(heart AND face) = 3/52 (J, Q, K of hearts)</li>
                        <li>P(heart OR face) = 13/52 + 12/52 - 3/52 = 22/52 ‚âà 0.423</li>
                    </ul>

                    <h4>Special Case: Mutually Exclusive</h4>
                    <p>If A and B cannot both occur: P(A ‚à© B) = 0</p>
                    <p>Then: P(A ‚à™ B) = P(A) + P(B)</p>
                </div>
            </div>

            <div class="code-example">
                <h3>üíª Addition Rule Implementation</h3>
                <pre><code class="language-python">def prob_union(set_a, set_b, sample_space):
    """Calculate P(A ‚à™ B) using addition rule"""
    p_a = len(set_a) / len(sample_space)
    p_b = len(set_b) / len(sample_space)
    intersection = set_a & set_b  # Set intersection
    p_intersection = len(intersection) / len(sample_space)

    return p_a + p_b - p_intersection

# Example: Rolling a die
sample = set(range(1, 7))
even = {2, 4, 6}
greater_than_3 = {4, 5, 6}

prob = prob_union(even, greater_than_3, sample)
print(f"P(even OR >3) = {prob:.4f}")  # 0.6667
print(f"Union: {even | greater_than_3}")  # {2, 4, 5, 6}</code></pre>
            </div>
        </section>

        <!-- Section 5: Conditional Probability -->
        <section class="content-section" data-section="5">
            <h2>5. Conditional Probability</h2>

            <div class="concept-box">
                <h3>Probability Given Information</h3>
                <div class="formula-box">
                    <p><strong>P(A|B) = P(A ‚à© B) / P(B)</strong></p>
                    <p>Probability of A given that B has occurred</p>
                </div>

                <div class="example-box">
                    <h4>Example: Two Dice</h4>
                    <p>Given that the sum is > 9, what's the probability it's exactly 11?</p>
                    <ul>
                        <li>B = "sum > 9": {(4,6), (5,5), (5,6), (6,4), (6,5), (6,6)} ‚Üí 6 outcomes</li>
                        <li>A = "sum = 11": {(5,6), (6,5)} ‚Üí 2 outcomes</li>
                        <li>A ‚à© B = "sum = 11 AND > 9" = {(5,6), (6,5)} ‚Üí 2 outcomes</li>
                        <li>P(A|B) = (2/36) / (6/36) = 2/6 = 1/3</li>
                    </ul>

                    <h4>Intuition</h4>
                    <p>When we know B occurred, our sample space shrinks to just B's outcomes.</p>
                    <p>P(A|B) = 2/6 because 2 out of 6 outcomes in B are also in A.</p>
                </div>
            </div>

            <div class="code-example">
                <h3>üíª Conditional Probability</h3>
                <pre><code class="language-python">def conditional_prob(event_a, event_b, sample_space):
    """Calculate P(A|B)"""
    if len(event_b) == 0:
        return 0

    intersection = event_a & event_b
    return len(intersection) / len(event_b)

# Two dice example
from itertools import product
two_dice = list(product(range(1, 7), repeat=2))

sum_11 = {(d1, d2) for d1, d2 in two_dice if d1 + d2 == 11}
sum_gt_9 = {(d1, d2) for d1, d2 in two_dice if d1 + d2 > 9}

prob = conditional_prob(sum_11, sum_gt_9, two_dice)
print(f"P(sum=11 | sum>9) = {prob:.4f}")  # 0.3333</code></pre>
            </div>
        </section>

        <!-- Section 6: Independence -->
        <section class="content-section" data-section="6">
            <h2>6. Independence</h2>

            <div class="concept-box">
                <h3>Events That Don't Affect Each Other</h3>
                <p>Events A and B are <strong>independent</strong> if:</p>
                <div class="formula-box">
                    <p><strong>P(A ‚à© B) = P(A) ¬∑ P(B)</strong></p>
                    <p>Equivalently: P(A|B) = P(A)</p>
                </div>

                <div class="example-box">
                    <h4>‚úÖ Independent Events</h4>
                    <ul>
                        <li>Flipping two coins: Result of first doesn't affect second</li>
                        <li>P(H on coin 1 AND H on coin 2) = 1/2 √ó 1/2 = 1/4</li>
                    </ul>

                    <h4>‚ùå Dependent Events</h4>
                    <ul>
                        <li>Drawing cards without replacement</li>
                        <li>P(2nd card is Ace | 1st card is Ace) = 3/51 ‚â† 4/52</li>
                        <li>First draw affects second!</li>
                    </ul>

                    <h4>Multiple Independent Events</h4>
                    <p>P(A‚ÇÅ ‚à© A‚ÇÇ ‚à© ... ‚à© A‚Çô) = P(A‚ÇÅ) ¬∑ P(A‚ÇÇ) ¬∑ ... ¬∑ P(A‚Çô)</p>
                </div>
            </div>

            <div class="code-example">
                <h3>üíª Testing Independence</h3>
                <pre><code class="language-python">def are_independent(event_a, event_b, sample_space):
    """Test if two events are independent"""
    p_a = len(event_a) / len(sample_space)
    p_b = len(event_b) / len(sample_space)
    intersection = event_a & event_b
    p_a_and_b = len(intersection) / len(sample_space)

    # Check if P(A ‚à© B) ‚âà P(A) ¬∑ P(B)
    expected = p_a * p_b
    return abs(p_a_and_b - expected) < 1e-10

# Example: Two coin flips
flips = {('H','H'), ('H','T'), ('T','H'), ('T','T')}
first_h = {('H','H'), ('H','T')}
second_h = {('H','H'), ('T','H')}

print(f"Independent: {are_independent(first_h, second_h, flips)}")  # True</code></pre>
            </div>
        </section>

        <!-- Section 7: Bayes' Theorem -->
        <section class="content-section" data-section="7">
            <h2>7. Bayes' Theorem</h2>

            <div class="concept-box">
                <h3>Reversing Conditional Probabilities</h3>
                <div class="formula-box">
                    <p><strong>P(A|B) = [P(B|A) ¬∑ P(A)] / P(B)</strong></p>
                    <p>where P(B) = P(B|A)¬∑P(A) + P(B|A')¬∑P(A')</p>
                </div>

                <div class="example-box">
                    <h4>Application: Medical Testing</h4>
                    <p>A disease affects 1% of the population. A test is 95% accurate (for both positive and negative).</p>
                    <p>If you test positive, what's the probability you have the disease?</p>

                    <ul>
                        <li>P(Disease) = 0.01</li>
                        <li>P(Positive|Disease) = 0.95 (true positive)</li>
                        <li>P(Positive|No Disease) = 0.05 (false positive)</li>
                    </ul>

                    <div class="theorem-box">
                        <p><strong>Solution:</strong></p>
                        <p>P(Disease|Positive) = [0.95 √ó 0.01] / [0.95 √ó 0.01 + 0.05 √ó 0.99]</p>
                        <p>= 0.0095 / (0.0095 + 0.0495)</p>
                        <p>= 0.0095 / 0.059</p>
                        <p>‚âà <strong>0.161 or 16.1%</strong></p>
                    </div>

                    <p>Despite testing positive, there's only 16% chance of having the disease!</p>
                </div>

                <div class="example-box">
                    <h4>Application: Spam Filters</h4>
                    <p>Email filters use Bayes' theorem to classify spam:</p>
                    <ul>
                        <li>P(Spam|word "viagra") = ?</li>
                        <li>Learn from training data: How often does "viagra" appear in spam vs. legitimate email?</li>
                        <li>Combine probabilities for all words to classify email</li>
                    </ul>
                </div>
            </div>

            <div class="code-example">
                <h3>üíª Bayes' Theorem Calculator</h3>
                <pre><code class="language-python">def bayes_theorem(p_b_given_a, p_a, p_b_given_not_a):
    """
    Calculate P(A|B) using Bayes' theorem
    p_b_given_a: P(B|A)
    p_a: P(A)
    p_b_given_not_a: P(B|A')
    """
    p_not_a = 1 - p_a
    p_b = p_b_given_a * p_a + p_b_given_not_a * p_not_a
    p_a_given_b = (p_b_given_a * p_a) / p_b
    return p_a_given_b

# Medical test example
p_disease_given_positive = bayes_theorem(
    p_b_given_a=0.95,      # P(Positive|Disease)
    p_a=0.01,              # P(Disease)
    p_b_given_not_a=0.05   # P(Positive|No Disease)
)

print(f"P(Disease|Positive) = {p_disease_given_positive:.4f}")  # 0.1610</code></pre>
            </div>
        </section>

        <!-- Section 8: Random Variables -->
        <section class="content-section" data-section="8">
            <h2>8. Random Variables</h2>

            <div class="concept-box">
                <h3>Mapping Outcomes to Numbers</h3>
                <p>A <strong>random variable</strong> is a function that assigns a numerical value to each outcome in a sample space.</p>

                <div class="example-box">
                    <h4>Example: Sum of Two Dice</h4>
                    <p>X = sum of two dice</p>
                    <ul>
                        <li>X(1,1) = 2</li>
                        <li>X(1,2) = 3</li>
                        <li>X(6,6) = 12</li>
                    </ul>

                    <h4>Probability Distribution</h4>
                    <table style="margin: 10px 0;">
                        <tr><th>X</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th><th>12</th></tr>
                        <tr><th>P(X)</th><td>1/36</td><td>2/36</td><td>3/36</td><td>4/36</td><td>5/36</td><td>6/36</td><td>5/36</td><td>4/36</td><td>3/36</td><td>2/36</td><td>1/36</td></tr>
                    </table>
                </div>

                <h3>Expected Value E[X]</h3>
                <div class="formula-box">
                    <p><strong>E[X] = Œ£ x ¬∑ P(X = x)</strong></p>
                    <p>The "average" value if we repeat the experiment many times</p>
                </div>

                <h3>Variance Var(X)</h3>
                <div class="formula-box">
                    <p><strong>Var(X) = E[X¬≤] - (E[X])¬≤</strong></p>
                    <p>Measures spread/dispersion of values</p>
                </div>
            </div>

            <div class="code-example">
                <h3>üíª Random Variable Analysis</h3>
                <pre><code class="language-python">from collections import Counter
from itertools import product

# Define random variable X = sum of two dice
two_dice = list(product(range(1, 7), repeat=2))
X = [d1 + d2 for d1, d2 in two_dice]

# Probability distribution
distribution = Counter(X)
total_outcomes = len(X)

print("Probability Distribution:")
for value in sorted(distribution.keys()):
    prob = distribution[value] / total_outcomes
    print(f"P(X={value}) = {prob:.4f}")

# Expected value
expected_value = sum(x * (distribution[x] / total_outcomes)
                     for x in distribution)
print(f"\nE[X] = {expected_value:.2f}")  # 7.00

# Variance
expected_x_squared = sum(x**2 * (distribution[x] / total_outcomes)
                         for x in distribution)
variance = expected_x_squared - expected_value**2
print(f"Var(X) = {variance:.2f}")  # 5.83</code></pre>
            </div>
        </section>

        <!-- Section 9: Expected Value -->
        <section class="content-section" data-section="9">
            <h2>9. Expected Value in Algorithms</h2>

            <div class="concept-box">
                <h3>Linearity of Expectation</h3>
                <div class="formula-box">
                    <p><strong>E[X + Y] = E[X] + E[Y]</strong></p>
                    <p>True even if X and Y are dependent!</p>
                </div>

                <div class="example-box">
                    <h4>Example: Coupon Collector Problem</h4>
                    <p>How many random coupons must you collect to get all n types?</p>
                    <ul>
                        <li>X‚ÇÅ = trials to get 1st unique coupon = 1</li>
                        <li>X‚ÇÇ = trials to get 2nd unique = n/(n-1)</li>
                        <li>X‚Çô = trials to get nth unique = n/1</li>
                        <li>E[Total] = n(1 + 1/2 + 1/3 + ... + 1/n) ‚âà n ln(n)</li>
                    </ul>

                    <h4>Application: Quicksort Analysis</h4>
                    <p>Expected number of comparisons in randomized quicksort: O(n log n)</p>
                    <ul>
                        <li>Random pivot selection</li>
                        <li>Use linearity of expectation to sum expected comparisons</li>
                        <li>Average case is good even though worst case is O(n¬≤)</li>
                    </ul>
                </div>
            </div>

            <div class="code-example">
                <h3>üíª Coupon Collector Simulation</h3>
                <pre><code class="language-python">import random
import math

def coupon_collector(n):
    """Simulate collecting n unique coupons"""
    collected = set()
    trials = 0

    while len(collected) < n:
        coupon = random.randint(1, n)
        collected.add(coupon)
        trials += 1

    return trials

# Simulate many times
n_types = 10
simulations = 1000
results = [coupon_collector(n_types) for _ in range(simulations)]
avg_trials = sum(results) / len(results)

# Theoretical expectation
harmonic_sum = sum(1/i for i in range(1, n_types + 1))
theoretical = n_types * harmonic_sum

print(f"Simulated average: {avg_trials:.2f}")
print(f"Theoretical E[X]: {theoretical:.2f}")
print(f"Approximation n*ln(n): {n_types * math.log(n_types):.2f}")</code></pre>
            </div>
        </section>

        <!-- Section 10: Python Simulations -->
        <section class="content-section" data-section="10">
            <h2>10. Python Probability Tools</h2>

            <div class="code-example">
                <h3>üíª Random Module</h3>
                <pre><code class="language-python">import random

# Basic random operations
random.random()              # Random float in [0.0, 1.0)
random.randint(1, 6)        # Random integer in [1, 6]
random.choice([1, 2, 3])    # Random element from sequence
random.shuffle([1, 2, 3])   # Shuffle list in-place

# Sampling
random.sample(range(100), 5)  # 5 unique random numbers
random.choices([1,2,3], k=5)  # 5 random picks (with replacement)

# Weighted random
random.choices(['A','B','C'], weights=[0.5, 0.3, 0.2], k=1000)</code></pre>
            </div>

            <div class="code-example">
                <h3>üíª Monte Carlo Simulation</h3>
                <pre><code class="language-python">def estimate_pi(n_samples=100000):
    """Estimate œÄ using Monte Carlo method"""
    inside_circle = 0

    for _ in range(n_samples):
        x = random.uniform(-1, 1)
        y = random.uniform(-1, 1)

        if x**2 + y**2 <= 1:
            inside_circle += 1

    # Area of circle / Area of square = œÄ/4
    pi_estimate = 4 * inside_circle / n_samples
    return pi_estimate

print(f"œÄ estimate: {estimate_pi():.4f}")  # ‚âà 3.1416</code></pre>
            </div>

            <div class="code-example">
                <h3>üíª Birthday Paradox</h3>
                <pre><code class="language-python">def birthday_paradox(n_people, trials=10000):
    """Probability that n people share a birthday"""
    matches = 0

    for _ in range(trials):
        birthdays = [random.randint(1, 365) for _ in range(n_people)]
        if len(birthdays) != len(set(birthdays)):
            matches += 1

    return matches / trials

# Famous result: 50% chance with just 23 people!
for n in [10, 20, 23, 30, 50]:
    prob = birthday_paradox(n)
    print(f"{n} people: {prob:.1%} chance of shared birthday")</code></pre>
            </div>
        </section>

        <!-- Quiz Section -->
        <section class="quiz-section">
            <h2>üéØ Quick Quiz</h2>

            <div class="quiz-question">
                <p><strong>Question 1:</strong> If P(A) = 0.6, what is P(A')?</p>
                <button onclick="checkAnswer(1, 'a', this)">0.4</button>
                <button onclick="checkAnswer(1, 'b', this)">0.6</button>
                <button onclick="checkAnswer(1, 'c', this)">1.6</button>
            </div>

            <div class="quiz-question">
                <p><strong>Question 2:</strong> If A and B are independent with P(A)=0.5 and P(B)=0.4, what is P(A‚à©B)?</p>
                <button onclick="checkAnswer(2, 'a', this)">0.9</button>
                <button onclick="checkAnswer(2, 'b', this)">0.2</button>
                <button onclick="checkAnswer(2, 'c', this)">0.1</button>
            </div>

            <div class="quiz-question">
                <p><strong>Question 3:</strong> What is E[X] for a fair six-sided die?</p>
                <button onclick="checkAnswer(3, 'a', this)">3</button>
                <button onclick="checkAnswer(3, 'b', this)">3.5</button>
                <button onclick="checkAnswer(3, 'c', this)">4</button>
            </div>

            <div class="quiz-question">
                <p><strong>Question 4:</strong> If P(Disease)=0.01 and P(Test+|Disease)=0.99, and P(Test+|No Disease)=0.05, what is approximately P(Disease|Test+)?</p>
                <button onclick="checkAnswer(4, 'a', this)">99%</button>
                <button onclick="checkAnswer(4, 'b', this)">17%</button>
                <button onclick="checkAnswer(4, 'c', this)">5%</button>
            </div>
        </section>

        <div class="navigation-buttons">
            <button class="nav-button prev" onclick="window.location.href='counting.html'">‚Üê Previous: Counting</button>
            <button class="nav-button next" onclick="window.location.href='recurrence.html'">Next: Recurrence Relations ‚Üí</button>
        </div>
    </div>

    <script src="../js/content.js"></script>
    <script>
        // Quiz answers: 1-a, 2-b, 3-b, 4-b
        const correctAnswers = {
            1: 'a',  // 0.4
            2: 'b',  // 0.2
            3: 'b',  // 3.5
            4: 'b'   // 17%
        };
    </script>
</body>
</html>
